<div class="card">
  <div class="card-header">
    <h5 class="mb-0">
      Trend Analysis for {{indicator.name}}
    </h5>
  </div>

  <div class="card-body">
    <div class="container-fluid">
      <div class="row" style="margin-bottom: 10px">
        <div class="col-5">
          <app-org-unit-filter
            #orgunitFilter
            [showUpdate]="true"
            (onOrgUnitUpdate) = "updateOrgUnit($event)"
            (onOrgUnitChange) = "changeOrgUnit($event)"
          ></app-org-unit-filter>
        </div>
        <div class="col-7">
          <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
            <button
              type="button"
              class="btn btn-outline-secondary cursor"
              [ngClass]="{ 'btn-outline-secondary': (periodType != 'LAST_3_MONTHS'),'btn-secondary':(visualizationType  == 'LAST_3_MONTHS') }"
              (click)="updatePeriod('LAST_3_MONTHS')"
            >Last 3 Month
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary cursor"
              [ngClass]="{ 'btn-outline-secondary': (periodType != 'LAST_6_MONTHS'),'btn-secondary':(visualizationType  == 'LAST_6_MONTHS') }"
              (click)="updatePeriod('LAST_6_MONTHS')"
            >Last 6 Month
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary cursor"
              [ngClass]="{ 'btn-outline-secondary': (periodType != 'LAST_12_MONTHS'),'btn-secondary':(visualizationType  == 'LAST_12_MONTHS') }"
              (click)="updatePeriod('LAST_12_MONTHS')"
            >Last 12 Month
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary cursor"
              [ngClass]="{ 'btn-outline-secondary': (periodType != 'LAST_4_QUARTERS'),'btn-secondary':(visualizationType  == 'LAST_4_QUARTERS') }"
              (click)="updatePeriod('LAST_4_QUARTERS')"
            >Last 4 Quarters
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary cursor"
              [ngClass]="{ 'btn-outline-secondary': (periodType != 'LAST_5_YEARS'),'btn-secondary':(visualizationType  == 'LAST_5_YEARS') }"
              (click)="updatePeriod('LAST_5_YEARS')"
            >Last 5 Years
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="loadingdata">
      <div class="text-center" style="margin-top: 100px">
        <img src="assets/img/balls-5.svg">
        <p>Preparing indicator data</p>
      </div>
    </div>
    <div *ngIf="!loadingdata">

      <div class="scrollable">

        <div *ngIf="visualizationType === 'table'" style="height: 400px">

          <app-table-template [tableObject]="tableObject"></app-table-template>
        </div>
        <div *ngIf="visualizationType === 'chart'" [ng2-highcharts]="chartObject"></div>

      </div>

    </div>

  </div>

  <div class="card-footer">
    <button
      class="btn btn-sm cursor"
      [ngClass]="{ 'btn-outline-secondary': (visualizationType != 'table'),'btn-secondary':(visualizationType  == 'table') }"
      (click)="changeVisualizationType('table')"
    >
      <i class="fa fa-table"></i> Table
    </button>
    <button
      class="btn btn-sm cursor"
      [ngClass]="{ 'btn-outline-secondary': (visualizationType != 'chart'),'btn-secondary':(visualizationType  == 'chart') }"
      (click)="changeVisualizationType('chart')"
    >
      <i class="fa fa-bar-chart"></i> Charts
    </button>
    <button
      class="btn btn-sm btn-outline-secondary cursor"
    >
      <i class="fa fa-file-excel-o"></i> Excel
    </button>
  </div>
</div>
